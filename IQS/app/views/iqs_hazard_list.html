<div class="app-shell">
    <div class="topbar">
        <div class="brand">
            <div class="brand-logo"></div>
            <div>
                <div class="brand-text-main">IQS - Safety Management Studio</div>
                <div class="brand-text-sub">Version Beta 0.5</div>
            </div>
        </div>
        <div class="topbar-right">
            <div class="pill">
                <span class="pill-dot"></span>
                <span>Demo data – not connected to live SMS</span>
            </div>
        </div>
    </div>

    <div class="main-layout">
        <div class="sidebar">
            <div class="nav-section-title">Safety core</div>
            <div class="nav-item" ng-class="{active: shell.isRoute('/hazards')}" ng-click="shell.go('/hazards')">
                <span class="nav-icon">⚠️</span>
                <span class="nav-label-main">Hazards</span>
                <span class="nav-badge">Register</span>
            </div>
            <div class="nav-item" ng-class="{active: shell.isRoute('/occurrences')}" ng-click="shell.go('/occurrences')">
                <span class="nav-icon">📋</span>
                <span class="nav-label-main">Occurrences</span>
                <span class="nav-badge">Reports</span>
            </div>

            <div class="nav-section-title">Change & assurance</div>
            <div class="nav-item" ng-class="{active: shell.isRoute('/mocs')}" ng-click="shell.go('/mocs')">
                <span class="nav-icon">♻️</span>
                <span class="nav-label-main">MOCs</span>
                <span class="nav-badge">Change</span>
            </div>
            <div class="nav-item" ng-class="{active: shell.isRoute('/audit')}" ng-click="shell.go('/audit')">
                <span class="nav-icon">📝</span>
                <span class="nav-label-main">Audits</span>
                <span class="nav-badge">Assurance</span>
            </div>

            <div class="nav-footer">
                <div><strong>Demo focus:</strong> hazard log, risk matrix, MOC & audit linkages and hazard-level actions/monitoring.</div>
            </div>
        </div>

        <div class="content-area">
            <div>
                <div class="page-header">
                    <div class="page-title-block">
                        <div class="page-title">
                            Hazards
                            <span class="page-title-pill">Hazard register</span>
                        </div>
                        <div class="page-subtitle">
                            Central register of operational hazards with risk assessment, actions and monitoring. Data shown is static demo content.
                        </div>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-ghost" ng-click="refresh()">
                            <span class="icon">↻</span>
                            Refresh
                        </button>
                        <button class="btn btn-primary" ng-click="new()">
                            <span class="icon">＋</span>
                            New hazard
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">Hazard register snapshot</div>
                            <div class="card-subtitle">
                                Filtered to a few demo hazards to illustrate linkage with occurrences, MOCs, audits and risk assessments.
                            </div>
                        </div>
                        <div class="card-header-right">
                            <div class="kpi-row">
                                <div class="kpi-dot"></div>
                                <div class="kpi-badge">DEMO ONLY</div>
                            </div>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Hazard</th>
                                    <th>Owner</th>
                                    <th>Risk (initial → residual)</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="h in items" ng-click="open(h)">
                                    <td>{{ h.code }}</td>
                                    <td>
                                        <div>{{ h.title }}</div>
                                        <div style="font-size:0.72rem; color:var(--text-soft); margin-top:2px;">
                                            {{ h.description }}
                                        </div>
                                    </td>
                                    <td>
                                        <span class="tag">
                                            <span class="tag-pill tag-pill-blue"></span>
                                            <span>{{ h.risk_owner }}</span>
                                        </span>
                                    </td>
                                    <td>
                                        <div style="display:flex; flex-direction:column; gap:2px;">
                                            <span class="tag badge-risk-high" ng-if="h.initial_risk_level_id === 3">
                                                Initial: High
                                            </span>
                                            <span class="tag badge-risk-medium" ng-if="h.initial_risk_level_id === 2">
                                                Initial: Medium
                                            </span>
                                            <span class="tag badge-risk-low" ng-if="h.initial_risk_level_id === 1">
                                                Initial: Low
                                            </span>

                                            <span class="tag badge-risk-high" ng-if="h.residual_risk_level_id === 3">
                                                Residual: High
                                            </span>
                                            <span class="tag badge-risk-medium" ng-if="h.residual_risk_level_id === 2">
                                                Residual: Medium
                                            </span>
                                            <span class="tag badge-risk-low" ng-if="h.residual_risk_level_id === 1">
                                                Residual: Low
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="tag badge-status-open" ng-if="h.hazard_status_id === 1">
                                            <span class="tag-pill tag-pill-red"></span>
                                            Identified
                                        </span>
                                        <span class="tag badge-status-in-progress" ng-if="h.hazard_status_id === 2">
                                            <span class="tag-pill tag-pill-amber"></span>
                                            Assessed
                                        </span>
                                        <span class="tag badge-status-closed" ng-if="h.hazard_status_id === 4">
                                            <span class="tag-pill tag-pill-green"></span>
                                            Closed
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <span><strong>Note:</strong> All content is fictitious and for concept/demo only.</span>
        <span class="link-muted" ng-click="shell.go('/hazards')">Back to hazard register</span>
    </div>
</div>


